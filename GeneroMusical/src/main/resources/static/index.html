<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Classificador de GÃªnero Musical</title>
</head>
<body>
    <h1>Classifique um GÃªnero Musical ðŸŽ¸</h1>
    <form id="predictionForm">
        <label for="intervaloMedio">Intervalo MÃ©dio:</label><br>
        <input type="number" step="0.1" id="intervaloMedio" name="intervaloMedio" required><br><br>

        <label for="ritmoMedio">Ritmo MÃ©dio (BPM):</label><br>
        <input type="number" id="ritmoMedio" name="ritmoMedio" required><br><br>

        <label for="complexidadeRitmo">Complexidade do Ritmo (0.0-1.0):</label><br>
        <input type="number" step="0.1" id="complexidadeRitmo" name="complexidadeRitmo" required><br><br>

        <label for="tonicaIndex">TÃ´nica Index (0-11):</label><br>
        <input type="number" id="tonicaIndex" name="tonicaIndex" required><br><br>

        <button type="submit">Prever GÃªnero</button>
    </form>
    <h2 id="result"></h2>

    <script>
        const form = document.getElementById('predictionForm');
        const resultDiv = document.getElementById('result');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const data = {
                intervaloMedio: parseFloat(document.getElementById('intervaloMedio').value),
                ritmoMedio: parseFloat(document.getElementById('ritmoMedio').value),
                complexidadeRitmo: parseFloat(document.getElementById('complexidadeRitmo').value),
                tonicaIndex: parseFloat(document.getElementById('tonicaIndex').value),
            };

            try {
                const response = await fetch('/api/previsao', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                if (!response.ok) {
                    throw new Error(`Erro na requisiÃ§Ã£o: ${response.status}`);
                }

                const result = await response.json();
                resultDiv.textContent = `GÃªnero previsto: ${result.generoPrevisto}`;
            } catch (error) {
                console.error('Erro:', error);
                resultDiv.textContent = 'Erro ao obter a previsÃ£o.';
            }
        });
    </script>
</body>
</html>